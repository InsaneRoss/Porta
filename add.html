<!DOCTYPE html>
<html>
<head>
  <title>Add PortaPotty</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; padding: 10px; }
    label, input, textarea, button { display: block; width: 100%; margin-top: 10px; }
    button { padding: 10px; background: #27ae60; color: white; border: none; border-radius: 4px; }
  </style>
</head>
<body>
  <h2>Add a PortaPotty</h2>
  <button onclick="useMyLocation()">üìç Use My Location</button>
  <p>or</p>
  <label for="address">Enter Address:</label>
  <input id="address" type="text" placeholder="123 Main St, City, State" />
  <label for="label">Description/Label:</label>
  <input id="label" type="text" placeholder="Near the tennis court..." />
  <button onclick="submitEntry()">Submit</button>

  <script>
    let lat = null, lon = null;

    function useMyLocation() {
      navigator.geolocation.getCurrentPosition(pos => {
        lat = pos.coords.latitude.toFixed(6);
        lon = pos.coords.longitude.toFixed(6);
        alert("Location set! Now enter a label and hit submit.");
      }, err => {
        alert("Unable to get location: " + err.message);
      });
    }

    function submitEntry() {
      const label = document.getElementById('label').value;
      const address = document.getElementById('address').value;

      let issueTitle = 'New PortaPotty Submission';
      let body = `**Label**: ${label}`;

      if (lat && lon) {
        body += `\n**Lat/Lng**: ${lat}, ${lon}`;
      } else if (address) {
        body += `\n**Address**: ${address}\n_Needs manual geocoding_`;
      } else {
        alert("Please use location or enter address.");
        return;
      }

      const githubUrl = `https://github.com/YOUR_USERNAME/YOUR_REPO/issues/new?title=${encodeURIComponent(issueTitle)}&body=${encodeURIComponent(body)}`;
      window.open(githubUrl, '_blank');
    }
  </script>
</body>
</html>